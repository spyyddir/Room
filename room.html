<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
	<head>
		<title></title>
		<style type="text/css">
		* 						{margin: 0; padding: 0;}
		body 					{margin: 10px; font-family: "Arial";}
		#room					{border: 3px solid #000; border-right: 0; position: relative;}
		#controls			{float: left; padding: 5px;}
		#controls a		{display: block; color: #fff; text-decoration: none; padding: 4px 8px; background: #333;}
		</style>
		<script type="text/javascript" charset="utf-8" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
		<script type="text/javascript" charset="utf-8" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/jquery-ui.min.js"></script>
		<script type="text/javascript" charset="utf-8" src="./item.js"></script>
		<script type="text/javascript" charset="utf-8">
			// TODO
			// save all when save turned back on
			// add/remove items from gui
		
			$(document).ready(function(){
				// globals
				window.saving = true;
				window.double_click_seconds = 0.5;
				$('#saving').toggle(function(){
					$(this).text('Turn saving on')
					saving = false;
				},function(){
					$(this).text('Turn saving off')
					saving = true;
				});
				// start main
				var scaling_factor = 2.5;
				dim_to_px = function(dim) {
					return dim*scaling_factor;
				}
				px_to_dim = function(px) {
					return px/scaling_factor;
				}
				
				var room_dim = [168, 174.5 + 41 + 6];
				var room = $('<div id="room"></div>');
				
				room.css({
					width:dim_to_px(room_dim[0]),
					height:dim_to_px(room_dim[1]),
					float: 'left'
				});
				$('body').append(room);
				
				var fplace = $('<div></div>');
				fplace_dim = [22, 102.5];
				fplace.css({
					width: dim_to_px( fplace_dim[0] ) - 2,
					height: dim_to_px( fplace_dim[1] ) - 4,
					top: dim_to_px( 60 ),
					right: 0,
					position:'absolute',
					border: "2px solid #000",
					"border-right":"0"
				});
				
				room.append(fplace);
				
				var tile = $('<div></div>');
				tile_dim = [20, 102.5];
				tile.css({
					width: dim_to_px( tile_dim[0] ),
					height: dim_to_px( tile_dim[1] ),
					position: "absolute",
					right: dim_to_px( fplace_dim[0] ),
					top: dim_to_px( 60 ),
					background:'#ddd'
				});
				
				room.append(tile);
				
				var pieces = [
					{
						title: "Expedit",
						width: 58.6,
						height: 15.3
					},
					{
						title: "Expedit2",
						width: 58.6,
						height: 15.3
					},
					{
						title: "Wee Chair",
						width: 19,
						height: 19
					},
					{
						title: "Dining Table",
						width: 35,
						height: 35
					},
					{
						title: 'Coffee Table',
						width: 39,
						height: 19
					},
					{
						title: 'Sactional',
						width: 82,
						height: 36
					},
					// {
					// 	title: 'Sactional 1',
					// 	width: 39,
					// 	height: 36
					// },
					// {
					// 	title: 'Sactional 2',
					// 	width: 39,
					// 	height: 36
					// },
					{
						title: "Plant Shelf",
						width: 16.5,
						height: 15.75
					},
					{
						title: 'TV',
						width: 41,
						height: 15.5
					},
					{
						title: 'Side Table',
						width: 20,
						height: 20
					},
					{
						title: 'Futon Couch',
						width: 35,
						height: 77
					},
					{
						title: 'Lamp',
						width: 12,
						height: 12,
						circle: true
					}
				];
				
				$.each(pieces, function(i, piece){
					var item = new Item(piece.title, piece.width, piece.height, piece.circle);
					room.append(item.elem);
				});
			});
		</script>
	</head>
	<body>
		<div id="controls">
			<a href="#" id="saving">Turn saving off</a>
		</div>
	</body>
</html>